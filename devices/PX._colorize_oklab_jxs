<jittershader name="gradient_oklab">
    <description>OKLAB Gradient Colorization Device for VJ Toolkit</description>
    <param name="tex0" type="int" default="0" />
    
    <!-- Core Parameters -->
    <param name="use_oklab" type="int" default="1" />
    <param name="color1" type="vec3" default="0.0 0.3 0.5" />
    <param name="color2" type="vec3" default="0.4 0.6 0.0" />
    <param name="color3" type="vec3" default="1.0 0.7 0.0" />
    <param name="use_three_colors" type="int" default="1" />
    <param name="midpoint_pos" type="float" default="0.5" />
    <param name="mid_width" type="float" default="0.0" />
    <param name="falloff" type="float" default="1.0" />
    
    <!-- Mapping Options -->
    <param name="mapping_mode" type="int" default="3" />
    <param name="range_min" type="float" default="0.0" />
    <param name="range_max" type="float" default="1.0" />
    <param name="mix_amount" type="float" default="1" />
    <param name="blend_mode" type="int" default="0" />
    <param name="invert_mapping" type="int" default="0" />
    <param name="luminosity" type="float" default="1.0" />
    <param name="posterize_levels" type="float" default="7.0" />
    <param name="posterize_smooth" type="float" default="0.5" />
    
    <language name="glsl" version="1.0">
        <bind param="tex0" program="fp" />
        <bind param="use_oklab" program="fp" />
        <bind param="color1" program="fp" />
        <bind param="color2" program="fp" />
        <bind param="color3" program="fp" />
        <bind param="use_three_colors" program="fp" />
        <bind param="midpoint_pos" program="fp" />
        <bind param="mid_width" program="fp" />
        <bind param="falloff" program="fp" />
        <bind param="mapping_mode" program="fp" />
        <bind param="range_min" program="fp" />
        <bind param="range_max" program="fp" />
        <bind param="mix_amount" program="fp" />
        <bind param="blend_mode" program="fp" />
        <bind param="invert_mapping" program="fp" />
        <bind param="luminosity" program="fp" />
        <bind param="posterize_levels" program="fp" />
        <bind param="posterize_smooth" program="fp" />
        <program name="vp" type="vertex">
            <![CDATA[
varying vec2 texcoord0;

void main() {
    gl_Position = ftransform();
    texcoord0 = vec2(gl_TextureMatrix[0] * gl_MultiTexCoord0);
}
]]>
        </program>
        <program name="fp" type="fragment" source="PX._colorize_oklab_fp.glsl" />
    </language>
</jittershader>
