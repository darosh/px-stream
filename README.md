# PX Stream [WIP]

> PX Stream is a visual performance toolkit for [Max for Live](https://www.ableton.com/en/live/max-for-live/),
> featuring audio-reactive [Interactive Shader Format](https://www.interactiveshaderformat.com/) visuals,
> text rendering and [Syphon](https://syphon.info/) output streaming

## Devices

<!-- begin: collage -->
<div>
    <a href="#px-mix-view"><img src="./assets/devices/PX_Mix_View_(expanded)_v1.webp" title="PX Mix View" width="273"/></a>
    <a href="#in-video"><img src="./assets/devices/PX_IN_Video_v1.webp" title="IN Video" width="71"/></a>
    <a href="#in-svg"><img src="./assets/devices/PX_IN_SVG_v1.webp" title="IN SVG" width="71"/></a>
    <a href="#gen-text"><img src="./assets/devices/PX_GEN_Text_v1.webp" title="GEN Text" width="71"/></a>
    <a href="#fx-convert"><img src="./assets/devices/PX_FX_Convert_v1.webp" title="FX Convert" width="71"/></a>
    <a href="#in-mix"><img src="./assets/devices/PX_IN_Mix_v1.webp" title="IN Mix" width="71"/></a>
    <a href="#fx-pixelization"><img src="./assets/devices/PX_FX_Pixelization_v1.webp" title="FX Pixelization" width="141"/></a>
    <a href="#px-shader"><img src="./assets/devices/PX_Shader_(types)_v1.webp" title="PX Shader" width="161"/></a>
    <a href="#px-mix-transition"><img src="./assets/devices/PX_Mix_Transition_v1.webp" title="PX Mix Transition" width="71"/></a>
    <a href="#in-syphon"><img src="./assets/devices/PX_IN_Syphon_v1.webp" title="IN Syphon" width="71"/></a>
    <a href="#in-cam"><img src="./assets/devices/PX_IN_Cam_v1.webp" title="IN Cam" width="71"/></a>
    <a href="#fx-delay"><img src="./assets/devices/PX_FX_Delay_v1.webp" title="FX Delay" width="71"/></a>
    <a href="#px-mix-dry"><img src="./assets/devices/PX_Mix_Dry_v1.webp" title="PX Mix Dry" width="71"/></a>
    <a href="#fx-color"><img src="./assets/devices/PX_FX_Color_(hue)_v1.webp" title="FX Color" width="252"/></a>
    <a href="#px-shader"><img src="./assets/devices/PX_Shader_v1.webp" title="PX Shader" width="246"/></a>
    <a href="#fx-alpha"><img src="./assets/devices/PX_FX_Alpha_v1.webp" title="FX Alpha" width="117"/></a>
    <a href="#px-mix-channel"><img src="./assets/devices/PX_Mix_Channel_v1.webp" title="PX Mix Channel" width="71"/></a>
    <a href="#fx-transform"><img src="./assets/devices/PX_FX_Transform_v1.webp" title="FX Transform" width="71"/></a>
    <a href="#fx-convert"><img src="./assets/devices/PX_FX_Convert_(convert_back)_v1.webp" title="FX Convert" width="71"/></a>
    <a href="#px-route-midi"><img src="./assets/devices/PX_Route_MIDI_(linked)_v1.webp" title="PX Route MIDI" width="58"/></a>
    <a href="#dev-info"><img src="./assets/devices/DEV_Info_v1.webp" title="DEV Info" width="137"/></a>
    <a href="#fx-color"><img src="./assets/devices/PX_FX_Color_v1.webp" title="FX Color" width="168"/></a>
    <a href="#fx-color"><img src="./assets/devices/PX_FX_Color_(gamma)_v1.webp" title="FX Color" width="161"/></a>
    <a href="#px-world"><img src="./assets/devices/PX_World_v1.webp" title="PX World" width="64"/></a>
    <a href="#in-channel"><img src="./assets/devices/PX_IN_Channel_v1.webp" title="IN Channel" width="71"/></a>
    <a href="#fx-kaleidoscope"><img src="./assets/devices/PX_FX_Kaleidoscope_v1.webp" title="FX Kaleidoscope" width="71"/></a>
    <a href="#dev-console"><img src="./assets/devices/DEV_Console_v1.webp" title="DEV Console" width="71"/></a>
    <a href="#gen-cos-pattern"><img src="./assets/devices/PX_GEN_Cos_Pattern_v1.webp" title="GEN Cos Pattern" width="167"/></a>
    <a href="#gen-text"><img src="./assets/devices/PX_GEN_Text_(expanded)_v1.webp" title="GEN Text" width="139"/></a>
    <a href="#fx-colorize"><img src="./assets/devices/PX_FX_Colorize_v1.webp" title="FX Colorize" width="117"/></a>
    <a href="#px-world"><img src="./assets/devices/PX_World_(mad_world)_v1.webp" title="PX World" width="64"/></a>
    <a href="#in-image"><img src="./assets/devices/PX_IN_Image_v1.webp" title="IN Image" width="71"/></a>
    <a href="#fx-pass"><img src="./assets/devices/PX_FX_Pass_v1.webp" title="FX Pass" width="71"/></a>
    <a href="#fx-blur"><img src="./assets/devices/PX_FX_Blur_v1.webp" title="FX Blur" width="71"/></a>
    <a href="#px-route-audio"><img src="./assets/devices/PX_Route_Audio_v1.webp" title="PX Route Audio" width="58"/></a>
    <a href="#px-mix-view"><img src="./assets/devices/PX_Mix_View_v1.webp" title="PX Mix View" width="175"/></a>
</div>
<!-- end: collage -->

<br>

<table>
  <tr>
    <th align="left">PX Core</th>
    <th align="left">IN (inputs)</th>
    <th align="left">GEN (generators)</th>
    <th align="left">FX (effects)</th>
    <th align="left">DEV (utilities)</th>
  </tr>
    <td valign="top">
        <a href="#px-world">World</a><br>
        <a href="#px-mix-view">Mix View</a><br>
        <a href="#px-mix_channel">Mix Channel</a><br>
        <a href="#px-mix-dry">Mix Dry</a><br>
        <a href="#px-mix-transition">Mix Transition</a><br>
        <hr>
        <a href="#px-route-audio">Route Audio</a><br>
        <a href="#px-route-midi">Route MIDI</a><br>
        <hr>
        <a href="#px-shader">Shader</a>
    </td>
    <td valign="top">
        <a href="#in-cam">IN Cam</a><br>
        <a href="#in-syphon">IN Syphon</a><br>
        <hr>
        <a href="#in-image">IN Image</a><br>
        <a href="#in-video">IN Video</a><br>
        <a href="#in-svg">IN SVG</a><br>
        <hr>
        <a href="#in-channel">IN Channel</a><br>
        <a href="#in-mix">IN Mix</a><br>
    </td>
    <td valign="top">
        <a href="#gen-cos-pattern">GEN Cos Pattern</a><br>
        <a href="#gen-text">GEN Text</a><br>
    </td>
    <td valign="top">
        <a href="#fx-alpha">FX Alpha</a><br>
        <a href="#fx-blur">FX Blur</a><br>
        <a href="#fx-color">FX Color</a><br>
        <a href="#fx-colorize">FX Colorize</a><br>
        <a href="#fx-convert">FX Convert</a><br>
        <a href="#fx-delay">FX Delay</a><br>
        <a href="#fx-kaleidoscope">FX Kaleidoscope</a><br>
        <a href="#fx-pass">FX Pass</a><br>
        <a href="#fx-pixelization">FX Pixelization</a><br>
        <a href="#fx-transform">FX Transform</a>
    </td>
    <td valign="top">
        <a href="#dev-info">DEV Info</a><br>
        <a href="#dev-console">DEV Console</a>
    </td>
  </tr>
</table>

### PX World

<img src="./assets/devices/PX_World_v1.webp" height="289" />
<img src="./assets/devices/PX_World_(mad_world)_v1.webp" height="289" />

### PX Mix View

<img src="./assets/devices/PX_Mix_View_v1.webp" height="289" />
<img src="./assets/devices/PX_Mix_View_(expanded)_v1.webp" height="289" />

### PX Mix Channel

<img src="./assets/devices/PX_Mix_Channel_v1.webp" height="289" />

### PX Mix Dry

<img src="./assets/devices/PX_Mix_Dry_v1.webp" height="289" />

### PX Mix Transition

<img src="./assets/devices/PX_Mix_Transition_v1.webp" height="289" />

---

### PX Route Audio

<img src="./assets/devices/PX_Route_Audio_v1.webp" height="289" />

### PX Route MIDI

<img src="./assets/devices/PX_Route_MIDI_(linked)_v1.webp" height="289" />

---

### PX Shader

<img src="./assets/devices/PX_Shader_v1.webp" height="289" />
<img src="./assets/devices/PX_Shader_(types)_v1.webp" height="289" />

---

### IN Cam

<img src="./assets/devices/PX_IN_Cam_v1.webp" height="289" />

### IN Syphon

<img src="./assets/devices/PX_IN_Syphon_v1.webp" height="289" />

### IN Image

<img src="./assets/devices/PX_IN_Image_v1.webp" height="289" />

### IN SVG

<img src="./assets/devices/PX_IN_SVG_v1.webp" height="289" />

### IN Video

<img src="./assets/devices/PX_IN_Video_v1.webp" height="289" />

### IN Channel

<img src="./assets/devices/PX_IN_Channel_v1.webp" height="289" />

### IN Mix

<img src="./assets/devices/PX_IN_Mix_v1.webp" height="289" />

---

### GEN Cos Pattern

<img src="./assets/devices/PX_GEN_Cos_Pattern_v1.webp" height="289" />

### GEN Text

<img src="./assets/devices/PX_GEN_Text_v1.webp" height="289" />
<img src="./assets/devices/PX_GEN_Text_(expanded)_v1.webp" height="289" />

---

### FX Alpha

Various Alpha channel manipulation like Chroma keying, mapping, inverting, smoothing, removing, etc. 

<img src="./assets/devices/PX_FX_Alpha_v1.webp" height="289" />

### FX Blur

Four blur Max/Jitter stock blur shaders

<img src="./assets/devices/PX_FX_Blur_v1.webp" height="289" />

### FX Color

Various color grading and adjustments

<img src="./assets/devices/PX_FX_Color_v1.webp" height="289" />
<img src="./assets/devices/PX_FX_Color_(gamma)_v1.webp" height="289" />
<img src="./assets/devices/PX_FX_Color_(hue)_v1.webp" height="289" />

### FX Colorize

Two/tri tone colorization with various mapping methods

<img src="./assets/devices/PX_FX_Colorize_v1.webp" height="289" />

### FX Convert

Texture format conversion, including OKLAB and normalized OKLAB aka NOKLAB

<img src="./assets/devices/PX_FX_Convert_v1.webp" height="289" />
<img src="./assets/devices/PX_FX_Convert_(convert_back)_v1.webp" height="289" />

### FX Delay

Texture delay in frames. You can mix it with dry signal using [Mix Dry](#px-mix-dry) device for ghostly trace effect

<img src="./assets/devices/PX_FX_Delay_v1.webp" height="289" />

### FX Kaleidoscope

Various emulation attempts of kaleidoscope layouts [suggested by Brewster](https://en.wikipedia.org/wiki/Kaleidoscope#Different_versions_suggested_by_Brewster) plus one stock Max/Jitter shader

<img src="./assets/devices/PX_FX_Kaleidoscope_v1.webp" height="289" />

### FX Pass

<img src="./assets/devices/PX_FX_Pass_v1.webp" height="289" />

### FX Pixelization

<img src="./assets/devices/PX_FX_Pixelization_v1.webp" height="289" />

### FX Transform

<img src="./assets/devices/PX_FX_Transform_v1.webp" height="289" />

---

### DEV Info

Displays texture info

<img src="./assets/devices/DEV_Info_v1.webp" height="289" />

### DEV Console

Enables additional Max console output. DO NOT USE IN PRODUCTION.

<img src="./assets/devices/DEV_Console_v1.webp" height="289" />

## Development

### Prerequisites

- install __"ISF by Vidvox"__ in Max `File > Show Package Manager`
- configure [maxdiff](https://github.com/Ableton/maxdevtools/tree/main/maxdiff)

### Diff

```bash
git --no-pager diff "./*.amxd" "./*.maxpat"
```

### Batch freezing

Requires preparation, see [scripts/freeze.scpt](./scripts/freeze.scpt)

```shell
npm script freeze
```

### Shaders

- shaders loaded from `./shaders` folder near the device
- do not use keywords (like `size`, `float`, `int`, ...) in ISF `NAME` property

### ISF Extensions

|      | Name       | Type     | Description                                                                                                                                                                                           |
|------|------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| WAVE | waveImage  | audio    | standard ISF, channel per image row                                                                                                                                                                   |
| WAVU | wavuImage  | audio    | channel per image color, Red = Left, Green = Right                                                                                                                                                    |
| FFT  | fftImage   | audiofft | standard ISF, channel per image row                                                                                                                                                                   |
| FFTU | fftuImage  | audiofft | channel per image color                                                                                                                                                                               |
| XY   | xyImage    | audio    | X = Left, Y = Right, dots                                                                                                                                                                             |
| XYC  | xycImage   | audio    | X = Left, Y = Right, connected lines                                                                                                                                                                  |
| XYD  | xydImage   | audio    | X = Left, Y = Right, skipping distant lines                                                                                                                                                           |
| XYE  | xyeImage   | audio    | [electron beam emulation](https://m1el.github.io/woscope-how/), ported to Jitter shader by Rob Ramirez [here](https://discord.com/channels/289378508247924738/351004699811512322/1407790819183956109) |
| MIDI | midiImage  | audio    | X = (R: note/velocity, G: CC number/value), Y = MIDI channel                                                                                                                                          |
| IN   | inputImage | image    | automatic, from previous device in the chain                                                                                                                                                          |

## Shaders [TBD]

### C. Colorful

### F. FFT Spectrogram

### G. Generator

### L. LED

### M. MIDI

### S. Scenes

### T. Transformation

### U. Utility

### W. Waveforms

### X. XY Oscilloscopes

### ~. Test Shaders

## Alternatives

- [VIZZable 2](https://github.com/zealtv/VIZZable-2) (free)
- [Geometrum 02](https://artekniks.gumroad.com/l/geometrum) (free)
- [Videosync 2](https://videosync.showsync.com/)
- [EboSuite](https://www.ebosuite.com/)
- [VS - Visual Synthesizer](https://www.imaginando.pt/products/vs-visual-synthesizer)
- [Zwobot](https://www.zwobotmax.com/)
